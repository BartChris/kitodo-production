<!--
 *
 * (c) Kitodo. Key to digital objects e. V. <contact@kitodo.org>
 *
 * This file is part of the Kitodo project.
 *
 * It is licensed under GNU General Public License version 3 or later.
 *
 * For the full copyright and license information, please read the
 * GPL3-License.txt file that was distributed with this source code.
 *
-->

<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">
    <p:dialog id="uploadFileDialog"
              widgetVar="uploadFileDialog"
              width="600"
              height="550"
              modal="true"
              resizable="false"
              showHeader="false"
              dynamic="true"
              appendTo="@(body)">
        <h:form id="uploadFileDialogForm" enctype="multipart/form-data">
            <p:panelGrid id="uploadFileGrid" columns="1" layout="grid">
                <p:row id="uploadRow">
                    <h3>#{msgs.fileUpload}</h3>
                    <div>
                        <p:outputLabel value="#{msgs.position}"
                                       for="physicalPosition"/>
                        <p:selectOneMenu id="physicalPosition"
                                         value="#{DataEditorForm.uploadFileDialog.selectedPosition}">
                            <f:selectItems value="#{DataEditorForm.uploadFileDialog.possiblePositions}"/>
                            <p:ajax event="blur"/>
                        </p:selectOneMenu>
                    </div>
                    <div>
                        <p:fileUpload value="#{DataEditorForm.uploadFileDialog.file}"
                                      fileUploadListener="#{DataEditorForm.uploadFileDialog.uploadFiles}"
                                      mode="advanced"
                                      multiple="true"
                                      allowTypes="/(\.|\/)(#{DataEditorForm.uploadFileDialog.fileType})$/"
                                      chooseIcon="fa fa-plus fa-lg"
                                      chooseLabel="#{msgs.chooseFile}"
                                      uploadIcon="fa fa-download fa-lg"
                                      uploadLabel="#{msgs.uploadFile}"
                                      cancelIcon="fa fa-times fa-lg"
                                      cancelLabel="#{msgs.cancel}"/>
                    </div>
                    <div>
                        <p:commandButton value="#{msgs.apply}"
                                         action="#{DataEditorForm.uploadFileDialog.refresh}"
                                         icon="fa fa-times fa-lg"
                                         iconPos="right"
                                         styleClass="primary right"
                                         update="logicalTree,paginationForm:paginationWrapperPanel,galleryWrapperPanel"
                                         oncomplete="PF('uploadFileDialog').hide();"/>
                        <p:commandButton value="#{msgs.close}"
                                         icon="fa fa-times fa-lg"
                                         iconPos="right"
                                         styleClass="secondary right"
                                         onclick="PF('uploadFileDialog').hide();"/>
                    </div>
                </p:row>
            </p:panelGrid>
        </h:form>
    </p:dialog>
</ui:composition>
